module.exports=[53463,(a,b,c)=>{"use strict";b.exports=a.r(21892).vendored.contexts.HooksClientContext},76335,(a,b,c)=>{"use strict";b.exports=a.r(21892).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},21892,(a,b,c)=>{"use strict";b.exports=a.r(18622)},27740,(a,b,c)=>{"use strict";b.exports=a.r(21892).vendored["react-ssr"].ReactJsxRuntime},73393,(a,b,c)=>{"use strict";b.exports=a.r(21892).vendored["react-ssr"].React},70404,(a,b,c)=>{"use strict";b.exports=a.r(21892).vendored.contexts.AppRouterContext},56130,(a,b,c)=>{"use strict";b.exports=a.r(21892).vendored["react-ssr"].ReactServerDOMTurbopackClient},3639,(a,b,c)=>{"use strict";b.exports=a.r(21892).vendored["react-ssr"].ReactDOM},34524,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},30997,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__"},61977,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"InvariantError",{enumerable:!0,get:function(){return d}});class d extends Error{constructor(a,b){super(`Invariant: ${a.endsWith(".")?a:a+"."} This is a bug in Next.js.`,b),this.name="InvariantError"}}},2983,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},36586,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={ACTION_HMR_REFRESH:function(){return k},ACTION_NAVIGATE:function(){return h},ACTION_REFRESH:function(){return g},ACTION_RESTORE:function(){return i},ACTION_SERVER_ACTION:function(){return l},ACTION_SERVER_PATCH:function(){return j},PrefetchKind:function(){return m}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g="refresh",h="navigate",i="restore",j="server-patch",k="hmr-refresh",l="server-action";var m=((d={}).AUTO="auto",d.FULL="full",d.TEMPORARY="temporary",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},68076,(a,b,c)=>{"use strict";function d(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isThenable",{enumerable:!0,get:function(){return d}})},87347,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={dispatchAppRouterAction:function(){return i},useActionQueue:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(34524)._(a.r(73393)),g=a.r(68076),h=null;function i(a){if(null===h)throw Object.defineProperty(Error("Internal Next.js error: Router action dispatched before initialization."),"__NEXT_ERROR_CODE",{value:"E668",enumerable:!1,configurable:!0});h(a)}function j(a){let[b,c]=f.default.useState(a.state);h=b=>a.dispatch(b,c);let d=(0,f.useMemo)(()=>b,[b]);return(0,g.isThenable)(d)?(0,f.use)(d):d}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},37025,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"callServer",{enumerable:!0,get:function(){return g}});let d=a.r(73393),e=a.r(36586),f=a.r(87347);async function g(a,b){return new Promise((c,g)=>{(0,d.startTransition)(()=>{(0,f.dispatchAppRouterAction)({type:e.ACTION_SERVER_ACTION,actionId:a,actionArgs:b,resolve:c,reject:g})})})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},40310,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findSourceMapURL",{enumerable:!0,get:function(){return d}});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},61648,a=>{"use strict";var b=a.i(41555),c=(0,b.createServerReference)("0066788a84acb84b4bc9006e3263c3f84d4f14a49d",b.callServer,void 0,b.findSourceMapURL,"signOut");a.s(["signOut",()=>c])},40148,a=>{"use strict";var b=a.i(40458);a.s(["X",()=>b.default])},35960,a=>{"use strict";var b=a.i(27740),c=a.i(73393);let d=(0,c.createContext)(void 0);function e({children:a}){return(0,b.jsx)(d.Provider,{value:{currency:"USD",setCurrency:a=>{},formatPrice:a=>`$${a.toFixed(2)}`,convertPrice:a=>a},children:a})}function f(){let a=(0,c.useContext)(d);if(!a)throw Error("useCurrency must be used within CurrencyProvider");return a}a.s(["CurrencyProvider",()=>e,"useCurrency",()=>f])},9944,a=>{"use strict";var b=a.i(73393);let c=0,d=new Map,e=a=>{if(d.has(a))return;let b=setTimeout(()=>{d.delete(a),h({type:"REMOVE_TOAST",toastId:a})},1e6);d.set(a,b)},f=[],g={toasts:[]};function h(a){g=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?e(c):a.toasts.forEach(a=>{e(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(g,a),f.forEach(a=>{a(g)})}function i({...a}){let b=(c=(c+1)%Number.MAX_SAFE_INTEGER).toString(),d=()=>h({type:"DISMISS_TOAST",toastId:b});return h({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||d()}}}),{id:b,dismiss:d,update:a=>h({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function j(){let[a,c]=b.useState(g);return b.useEffect(()=>(f.push(c),()=>{let a=f.indexOf(c);a>-1&&f.splice(a,1)}),[a]),{...a,toast:i,dismiss:a=>h({type:"DISMISS_TOAST",toastId:a})}}a.s(["useToast",()=>j])},94519,a=>{"use strict";var b=a.i(41555),c=(0,b.createServerReference)("602a7ae21bbcace017280431ed2a8210ab6601cce0",b.callServer,void 0,b.findSourceMapURL,"signIn");a.s(["signIn",()=>c])},59121,a=>{"use strict";var b=a.i(41555),c=(0,b.createServerReference)("700d0cf82d8344131a7f3e1917a6f18faf8296963d",b.callServer,void 0,b.findSourceMapURL,"signUp");a.s(["signUp",()=>c])},28883,a=>{"use strict";var b=a.i(27740),c=a.i(73393),d=a.i(21650),e=a.i(9944),f=a.i(94519),g=a.i(61648),h=a.i(59121);let i=(0,c.createContext)(void 0);function j({children:a}){let[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!0),n=(0,d.useRouter)(),{toast:o}=(0,e.useToast)(),p=async()=>{try{let[a,b]=await Promise.all([fetch("/api/user").then(a=>a.ok?a.json():null),fetch("/api/profile").then(a=>a.ok?a.json():null)]);if(!a)return void k(null);k({id:a.id,email:a.email,role:a.role,name:a.name??null,profile:b??null})}catch{k(null)}};(0,c.useEffect)(()=>{(async()=>{await p(),m(!1)})()},[]);let q=async(a,b)=>{let c=await (0,f.signIn)(a,b);return c?.error?(o({title:"Ошибка входа",description:"Неверный email или пароль",variant:"destructive"}),!1):(await p(),o({title:"Добро пожаловать!",description:"Вы успешно вошли в систему"}),n.push("/dashboard"),!0)},r=async(a,b,c)=>{let d=await (0,h.signUp)(a,b,c);return d?.error?(o({title:"Ошибка регистрации",description:d.error,variant:"destructive"}),!1):(await p(),o({title:"Регистрация успешна!",description:"Добро пожаловать в VDS_HUB"}),n.push("/dashboard"),!0)},s=async()=>{await (0,g.signOut)()};return(0,b.jsx)(i.Provider,{value:{user:j,login:q,register:r,logout:s,refresh:p,isLoading:l},children:a})}function k(){let a=(0,c.useContext)(i);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}a.s(["AuthProvider",()=>j,"useAuth",()=>k])},633,a=>{"use strict";var b=a.i(27740),c=a.i(73393);let d=(a,b)=>{},e="vds_hub_servers",f="vds_hub_transactions",g="vds_hub_promo_codes",h="vds_hub_referrals",i="vds_hub_support_tickets";var j=a.i(28883),k=a.i(9944);let l=(0,c.createContext)(void 0);function m({children:a}){let{user:m,updateUser:n}=(0,j.useAuth)(),{toast:p}=(0,k.useToast)(),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)([]),A=()=>{r([]),t([]),v([]),x([]),z([])};(0,c.useEffect)(()=>{A()},[]);let B=a=>{let b=[...s,{...a,id:o(),createdAt:new Date().toISOString()}];if(t(b),d(f,b),"topup"===a.type&&"completed"===a.status&&m){let b=w.filter(a=>a.referredId===m.id);if(b.length>0){let c=.1*a.amount,e=b[0],f=w.map(a=>a.id===e.id?{...a,earnings:a.earnings+c}:a);x(f),d(h,f)}}};return(0,b.jsx)(l.Provider,{value:{servers:q,transactions:s,promoCodes:u,referrals:w,supportTickets:y,createServer:a=>{if(!m)return;let b=[...q,{...a,id:o(),userId:m.id,createdAt:new Date().toISOString()}];r(b),d(e,b),n({balance:m.balance-a.price}),B({userId:m.id,type:"purchase",amount:-a.price,status:"completed",description:`Purchased server: ${a.name}`}),p({title:"Сервер создан!",description:`Сервер ${a.name} успешно создан`})},deleteServer:a=>{let b=q.filter(b=>b.id!==a);r(b),d(e,b),p({title:"Сервер удален",description:"Сервер успешно удален"})},updateServer:(a,b)=>{let c=q.map(c=>c.id===a?{...c,...b}:c);r(c),d(e,c)},addTransaction:B,createPromoCode:a=>{let b=[...u,{...a,id:o(),currentUses:0}];v(b),d(g,b),p({title:"Промокод создан",description:`Промокод ${a.code} успешно создан`})},applyPromoCode:(a,b)=>{let c=u.find(b=>b.code===a&&b.active&&b.currentUses<b.maxUses&&new Date(b.expiresAt)>new Date);if(!c)return p({title:"Ошибка",description:"Промокод недействителен или истек",variant:"destructive"}),b;let e=u.map(a=>a.id===c.id?{...a,currentUses:a.currentUses+1}:a);v(e),d(g,e);let f="percentage"===c.type?b*(c.discount/100):c.discount;return p({title:"Промокод применен!",description:`Скидка: ${f.toFixed(2)}$`}),b-f},createSupportTicket:a=>{if(!m)return;let b=[...y,{...a,id:o(),userId:m.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];z(b),d(i,b),p({title:"Тикет создан",description:"Ваш запрос отправлен в поддержку"})},refreshData:()=>{A()}},children:a})}function n(){let a=(0,c.useContext)(l);if(void 0===a)throw Error("useData must be used within a DataProvider");return a}function o(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}a.s(["DataProvider",()=>m,"useData",()=>n],633)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d2403312._.js.map